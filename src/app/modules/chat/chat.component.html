<ng-container *ngIf="formConfig && chatMessages">

    <div class="push-left push-right push-top">
        <md-form-field flex>
            <input mdInput placeholder="{{'shared.search' | translate}}" [formControl]="searchControl" [value]="chatMessagesSearch" />
            <span mdPrefix><md-icon>search</md-icon></span>
        </md-form-field>
    </div>

    <md-card class="push">
        <md-card-content class="bgc-blue-grey-50">
            <dynamic-form [config]="formConfig"></dynamic-form>
        </md-card-content>
        <ng-container *ngFor="let chatMessage of chatMessages">
            <md-card-header>
                <img mdCardAvatar alt="" [src]="chatMessage.recipient.avatarUrl" />
                <md-card-title>{{ chatMessage.sender.getFullName() }}</md-card-title>
                <md-card-subtitle><span class="md-caption">{{ formatDate(chatMessage.created)}}</span></md-card-subtitle>
            </md-card-header>
            <md-card-content>
                <p>
                    {{ chatMessage.message }}
                </p>
            </md-card-content>
            <md-divider></md-divider>
        </ng-container>
    </md-card>

    <div class="text-center push">
        <button *ngIf="!allChatMessagesLoaded" md-raised-button color="accent" (click)="loadMoreMessages()">{{ 'shared.loadMore' | translate }}</button>
        <button *ngIf="allChatMessagesLoaded" md-raised-button>{{ 'module.clients.chat.allMessagesLoaded' | translate }}</button>
    </div>

</ng-container>