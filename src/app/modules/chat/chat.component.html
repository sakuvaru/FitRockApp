<ng-container *ngIf="formConfig && chatMessages">

    <div class="push-left push-right push-top">
        <mat-form-field flex>
            <input matInput placeholder="{{'shared.search' | translate}}" [formControl]="searchControl" [value]="chatMessagesSearch" />
            <span matPrefix><mat-icon>search</mat-icon></span>
        </mat-form-field>
    </div>

    <mat-card class="push">
        <mat-card-content>
            <dynamic-form [config]="formConfig"></dynamic-form>
        </mat-card-content>
        <mat-divider></mat-divider>
        <ng-container *ngFor="let chatMessage of chatMessages">
            <mat-card-header>
                <img matCardAvatar alt="" [src]="chatMessage.sender.avatarUrl" />
                <mat-card-title>{{ chatMessage.sender.getFullName() }}</mat-card-title>
                <mat-card-subtitle><span class="md-caption">{{ formatDate(chatMessage.created)}}</span></mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <p>
                    {{ chatMessage.message }}
                </p>
            </mat-card-content>
            <mat-divider></mat-divider>
        </ng-container>
    </mat-card>

    <div class="text-center push">
        <button *ngIf="!allChatMessagesLoaded" mat-raised-button color="accent" (click)="loadMoreMessages()">{{ 'shared.loadMore' | translate }}</button>
        <button *ngIf="allChatMessagesLoaded" mat-raised-button>{{ 'module.clients.chat.allMessagesLoaded' | translate }}</button>
    </div>

</ng-container>